!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="public/scripts/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(t,e){this.set(t,e)}set(t,e){this.x=t,this.y=e}}class n{constructor(){this.grid=[]}get(t,e){const i=this.grid[t];if(i)return i[e]}set(t,e,i){this.grid[t]||(this.grid[t]=[]),this.grid[t][e]=i}forEach(t){this.grid.forEach((e,i)=>{e.forEach((e,s)=>{t(e,i,s)})})}}window.Matrix=n;class o{constructor(){this.pos=new s(0,0),this.size=new s(1408,640)}}class r{constructor(t=1/60){let e=0,i=0;this.shouldTimerStop=!1,this.updateProxy=s=>{if(!this.shouldTimerStop){for(i+=(s-e)/1e3,i>1&&(i=1);i>t;)this.update(t),i-=t;e=s,this.enqueue()}}}enqueue(){requestAnimationFrame(this.updateProxy)}start(){this.enqueue()}stop(){this.shouldTimerStop=!0}}class a{constructor(){this.layers=[]}draw(t,e){this.layers.forEach(i=>{i(t,e)})}}class c{constructor(t,e=128){this.matrix=t,this.tileSize=e}toIndex(t){return Math.floor(t/this.tileSize)}toIndexRange(t,e){const i=Math.ceil(e/this.tileSize)*this.tileSize,s=[];let n=t;do{s.push(this.toIndex(n)),n+=this.tileSize}while(n<i);return s}getByIndex(t,e){const i=this.matrix.get(t,e);if(i){const s=t*this.tileSize,n=s+this.tileSize,o=e*this.tileSize;return{tile:i,x1:s,x2:n,y1:o,y2:o+this.tileSize}}}searchByPosition(t,e){return this.getByIndex(this.toIndex(t),this.toIndex(e))}searchByRange(t,e,i,s){const n=[];return this.toIndexRange(t,e).forEach(t=>{this.toIndexRange(i,s).forEach(e=>{const i=this.getByIndex(t,e);i&&n.push(i)})}),n}}class l{constructor(t){this.tiles=new c(t)}checkX(t){let e;if(t.vel.x>0)e=t.bounds.right;else{if(!(t.vel.x<0))return;e=t.bounds.left}this.tiles.searchByRange(e,e,t.bounds.top,t.bounds.bottom).forEach(e=>{"ground"===e.tile.type&&(t.vel.x>0?t.bounds.right>e.x1&&(t.bounds.right=e.x1,t.vel.x=0,t.obstruct()):t.vel.x<0&&t.bounds.left<e.x2&&(t.bounds.left=e.x2,t.vel.x=0,t.obstruct()))})}checkY(t){let e;if(t.vel.y>0)e=t.bounds.bottom;else{if(!(t.vel.y<0))return;e=t.bounds.top}this.tiles.searchByRange(t.bounds.left,t.bounds.right,e,e).forEach(e=>{"ground"===e.tile.type&&(t.vel.y>0?t.bounds.bottom>e.y1&&(t.bounds.bottom=e.y1,t.vel.y=0,t.obstruct()):t.vel.y<0&&t.bounds.top<e.y2&&(t.bounds.top=e.y2,t.vel.y=0,t.obstruct()))})}test(t){this.checkX(t),this.checkY(t)}}class d{constructor(t){this.entities=t}check(t){this.entities.forEach(e=>{t!==e&&t.bounds.overlaps(e.bounds)&&(t.collides(e),e.collides(e))})}}class u{constructor(){this.gravity=800,this.totalTime=0,this.comp=new a,this.entities=new Set,this.tileCollider=null,this.entityCollider=new d(this.entities)}setCollisionGrid(t){this.tileCollider=new l(t)}update(t){const{deltaTime:e}=t;this.entities.forEach(i=>{i.update(t),i.pos.x+=i.vel.x*e,i.canCollide&&this.tileCollider.checkX(i),i.pos.y+=i.vel.y*e,i.canCollide&&this.tileCollider.checkY(i)}),this.entities.forEach(t=>{t.canCollide&&this.entityCollider.check(t)}),this.totalTime+=e}}class h{constructor(t,e,i,s=1){this.image=t,this.width=e,this.height=i,this.scale=s,this.tiles=new Map,this.animations=new Map}defineAnim(t,e){this.animations.set(t,e)}define(t,e,i,s,n,o=1){this.width=s,this.height=n,this.scale=o;const r=document.createElement("canvas");r.width=s,r.height=n,r.getContext("2d").drawImage(this.image,e,i,s,n,0,0,Math.ceil(s*this.scale),Math.ceil(n*this.scale)),this.tiles.set(t,r)}defineTile(t,e,i,s=0,n=0){this.define(t,e*this.width+s,i*this.height+n,this.width,this.height)}draw(t,e,i,s){const n=this.tiles.get(t);e.drawImage(n,i,s)}drawAnim(t,e,i,s,n){const o=this.animations.get(t);this.drawTile(o(n),e,i,s)}drawTile(t,e,i,s){this.draw(t,e,i*this.width,s*this.height)}}function p(t,e){return function(i){if(1===t.length)return t[0];const s=Math.floor(i/e)%t.length;return t[s]}}async function f(t){return fetch(t).then(t=>t.json())}async function m(t){return f(`../sprites/${t}.json`).then(t=>{return Promise.all([t,(e=t.imageURL,new Promise(t=>{const i=new Image;i.addEventListener("load",()=>{t(i)}),i.src=e}))]);var e}).then(([t,e])=>{const i=new h(e,t.tileW,t.tileH,t.scale);return t.tiles&&t.tiles.forEach(t=>{const{name:e,index:s,offsetX:n,offsetY:o}=t;i.defineTile(e,s[0],s[1],n,o)}),t.frames&&t.frames.forEach(t=>{let e=t.rect[0],s=t.rect[1],n=t.rect[2],o=t.rect[3];i.define(t.name,e,s,n,o,t.scale)}),t.animations&&t.animations.forEach(t=>{const e=p(t.frames,t.frameLen);i.defineAnim(t.name,e)}),i})}function y(t,e){const i=function(t,e){const i=new n;for(const{tile:s,x:n,y:o}of T(t,e))i.set(n,o,{type:s.type});return i}(t.layers.reduce((t,e)=>t.concat(e.tiles),[]),t.patterns);e.setCollisionGrid(i)}function x(t,e,i){t.layers.forEach(s=>{const o=function(t,e,i){const s=new c(e),n=document.createElement("canvas");n.width=2560,n.height=640;const o=n.getContext("2d");function r(t,s){o.clearRect(0,0,n.width,n.height);for(let n=t;n<=s;++n){const s=e.grid[n];s&&s.forEach((e,s)=>{i.drawTile(e.name,o,n-t,s)})}}return function(t,e){const i=s.toIndex(e.size.x),o=s.toIndex(e.pos.x);r(o,o+i),t.drawImage(n,-e.pos.x%128,-e.pos.y)}}(0,function(t,e){const i=new n;for(const{tile:s,x:n,y:o}of T(t,e))i.set(n,o,{name:s.name});return i}(s.tiles,t.patterns),i);e.comp.layers.push(o)})}function g(t,e,i){t.entities.forEach(({name:t,pos:[s,n]})=>{const o=(0,i[t])();o.pos.set(s,n),"enemyFighter"===t&&o.vel.set(-(50+Math.floor(100*Math.random())),0),e.entities.add(o)});const s=function(t,e,i){const s=document.createElement("canvas");s.width=e,s.height=i;const n=s.getContext("2d");return function(o,r){t.forEach(t=>{n.clearRect(0,0,e,i),t.draw(n),o.drawImage(s,t.pos.x-r.pos.x,t.pos.y-r.pos.y)})}}(e.entities,384,384);e.comp.layers.push(s)}function*b(t,e,i,s){const n=t+e,o=i+s;for(let e=t;e<n;++e)for(let t=i;t<o;++t)yield{x:e,y:t}}function w(t){if(4===t.length){const[e,i,s,n]=t;return b(e,i,s,n)}if(3===t.length){const[e,i,s]=t;return b(e,i,s,1)}if(2===t.length){const[e,i]=t;return b(e,1,i,1)}}function*v(t){for(const e of t)yield*w(e)}function*T(t,e){yield*function*t(i,s,n){for(const o of i)for(const{x:i,y:r}of v(o.ranges)){const a=i+s,c=r+n;if(o.pattern){const i=e[o.pattern].tiles;yield*t(i,a,c)}else yield{tile:o,x:a,y:c}}}(t,0,0)}class E{constructor(t,e,i){this.pos=t,this.size=e,this.offset=i}overlaps(t){return this.bottom>t.top&&this.top<t.bottom&&this.left<t.right&&this.right>t.left}get bottom(){return this.pos.y+this.size.y+this.offset.y}set bottom(t){this.pos.y=t-(this.size.y+this.offset.y)}get top(){return this.pos.y+this.offset.y}set top(t){this.pos.y=t-this.offset.y}get left(){return this.pos.x+this.offset.x}set left(t){this.pos.x=t-this.offset.x}get right(){return this.pos.x+this.size.x+this.offset.x}set right(t){this.pos.x=t-(this.size.x+this.offset.x)}}class M{constructor(t){this.NAME=t}collides(t,e){}obstruct(){}update(){}}class B{constructor(){this.pos=new s(0,0),this.vel=new s(0,0),this.size=new s(0,0),this.offset=new s(0,0),this.traits=[],this.bounds=new E(this.pos,this.size,this.offset),this.canCollide=!0,this.lifeTime=0}addTrait(t){this.traits.push(t),this[t.NAME]=t}collides(t){this.traits.forEach(e=>{e.collides(this,t)})}obstruct(){this.traits.forEach(t=>{t.obstruct(this)})}update(t){this.traits.forEach(e=>{e.update(this,t)}),this.lifeTime+=t.deltaTime}}class k extends M{constructor(){super("ascend"),this.duration=5e3,this.engageTime=0,this.ascendSpeed=.0015,this.direction=0}start(){this.engageTime=this.duration}cancel(){this.engageTime=0}update(t,e){const{deltaTime:i}=e;t.pos.y<=0?t.pos.y=1:this.engageTime>0&&t.pos.y>=0&&(t.pos.y>0?(t.pos.y+=this.direction*this.ascendSpeed*this.engageTime,t.vel.y=this.direction*this.ascendSpeed):(t.vel.y=0,t.pos.y=1),this.engageTime-=i)}}class S extends M{constructor(){super("go"),this.direction=0,this.acceleration=500,this.dragFactor=2e-9,this.isObstructed=!1}obstruct(t){this.isObstructed=!0}update(t,e){const{deltaTime:i}=e;if(!0===this.isObstructed)return t.vel.x=0,void(t.vel.y=0);t.vel.x>2400?t.vel.x=2400:t.vel.x<300?t.vel.x=300:t.vel.x+=Math.floor(this.acceleration*this.direction*i)}}class I extends M{constructor(){super("killable"),this.dead=!1}kill(){this.dead=!0}}class A extends M{constructor(){super("supercruise"),this.duration=0}obstruct(t){}maintainedFor(){return this.duration}update(t,e){const{deltaTime:i}=e;t.vel.x>1235&&(this.duration+=i)}}class z extends M{constructor(){super("behaviour")}collides(t,e){e.enemyAircraft&&(t.killable.kill(),e.killable.kill())}}async function F(){return m("playerFighter").then(C)}function C(t){const e=p(["flying"],10);function i(i){t.draw(0!==this.go.direction?e(void 0):"flying",i,0,0)}return function(){const e=new B;return e.size.set(t.width*t.scale,t.height*t.scale),e.addTrait(new S),e.addTrait(new k),e.addTrait(new z),e.addTrait(new I),e.addTrait(new A),e.draw=i,e}}class O extends M{constructor(){super("explosionAircraft"),this.duration=0,this.spawnTimeout=0}update(t,e){const{deltaTime:i,audioBoard:s}=e;this.duration>=400?this.duration=0:(this.duration+=1e3*i,this.spawnTimeout+=i)}}async function D(){return m("aircraftExplosion").then(L)}function L(t){const e=t.animations.get("explosion");function i(i){var s;t.draw((s=this).explosionAircraft.duration<400?e(s.explosionAircraft.duration):"explosion-4",i,0,0)}return function(){const e=new B;return e.size.set(t.width*t.scale,t.height*t.scale),e.addTrait(new O),e.draw=i,e}}class $ extends M{constructor(){super("missileLaunch"),this.direction=1,this.speed=2900,this.isObstructed=!1,this.maxRange=1152}obstruct(t){this.isObstructed=!0}passedMaxRange(t,e){return t.pos.x-e>this.maxRange}update(t,e){const{deltaTime:i}=e;if(!0===this.isObstructed)return t.vel.x=0,void(t.vel.y=0);t.vel.x=Math.floor(this.speed*this.direction)}}class P extends M{constructor(){super("behaviour")}collides(t,e){e.enemyAircraft&&(t.killable.kill(),e.killable.kill())}}async function R(){return m("missile").then(j)}function j(t){function e(e){t.draw("flying",e,0,0)}return function(){const i=new B;return i.size.set(t.width*t.scale,t.height*t.scale),i.offset.set(0,-20),i.addTrait(new $),i.addTrait(new P),i.addTrait(new I),i.draw=e,i}}class G extends M{constructor(){super("enemyAircraft")}}async function H(){return m("enemyFighter").then(K)}function K(t){function e(e){t.draw("flying",e,0,0)}return function(){const i=new B;return i.size.set(t.width*t.scale,t.height*t.scale),i.vel.set(-50,0),i.addTrait(new G),i.addTrait(new I),i.draw=e,i}}class _ extends M{constructor(){super("gravity"),this.gravity=3e3,this.isObstructed=!1}obstruct(t){t.vel.x=0,t.vel.y=0,this.isObstructed=!0}update(t,e){const{deltaTime:i}=e;if(!0===this.isObstructed)return t.vel.x=0,void(t.vel.y=0);t.vel.y+=Math.floor(this.gravity*i)}}class q extends M{constructor(){super("behaviour")}collides(t,e){e.enemyVehicle&&(t.killable.kill(),e.killable.kill())}}async function N(){return m("bomb").then(X)}function X(t){function e(e){t.draw("falling",e,0,0)}return function(){const i=new B;return i.size.set(t.width*t.scale,t.height*t.scale),i.offset.set(0,0),i.addTrait(new _),i.addTrait(new q),i.addTrait(new I),i.draw=e,i}}class Y extends M{constructor(){super("explosionBomb"),this.duration=0,this.spawnTimeout=0}update(t,e){const{deltaTime:i,audioBoard:s}=e;this.duration>=900?this.duration=0:(this.duration+=1e3*i,this.spawnTimeout+=i)}}async function V(){return m("bombExplosion").then(U)}function U(t){const e=t.animations.get("explosion");function i(i){var s;t.draw((s=this).explosionBomb.duration<900?e(s.explosionBomb.duration):"explosion-9",i,0,0)}return function(){const e=new B;return e.size.set(t.width*t.scale,t.height*t.scale),e.addTrait(new Y),e.draw=i,e}}class W extends M{constructor(){super("groundVehicle")}}class J extends M{constructor(){super("behaviour")}collides(t,e){(e.gravity||e.go)&&(t.killable.kill(),e.killable.kill())}}async function Q(){return m("tank").then(Z)}function Z(t){p(["idle"],10);function e(e){t.draw("idle",e,0,0)}return function(){const i=new B;return i.size.set(t.width*t.scale,t.height*t.scale),i.vel.set(0,0),i.addTrait(new W),i.addTrait(new J),i.addTrait(new I),i.draw=e,i}}class tt{constructor(){this.keyStates=new Map,this.keyMap=new Map}addMapping(t,e){this.keyMap.set(t,e)}handleEvent(t){const{code:e}=t;if(!this.keyMap.has(e))return;t.preventDefault();const i="keydown"===t.type?1:0;this.keyStates.get(e)!==i&&(this.keyStates.set(e,i),this.keyMap.get(e)(i))}listenTo(t){["keydown","keyup"].forEach(e=>{t.addEventListener(e,t=>{this.handleEvent(t)})})}}class et extends M{constructor(t,e){super("fireMissile"),this.spawnTimeout=0,this.shouldFireMissile=!1,this.level=t,this.entityFactory=e}fireMissile(){this.shouldFireMissile=!0}cancelMissileFire(){this.shouldFireMissile=!1}obstruct(){}update(t,e){const{deltaTime:i,audioBoard:s}=e;if(this.spawnTimeout>.5&&this.shouldFireMissile){const e=this.entityFactory.missile();e.pos.x=t.pos.x,e.pos.y=t.pos.y+20,s.playAudio("missile"),this.level.entities.add(e),this.spawnTimeout=0,this.shouldFireMissile=!1}this.spawnTimeout+=i}}class it extends M{constructor(t,e){super("dropBomb"),this.spawnTimeout=0,this.shouldDropBomb=!1,this.level=t,this.entityFactory=e}dropBomb(){this.shouldDropBomb=!0}cancelBombDrop(){this.shouldDropBomb=!1}obstruct(){}update(t,e){const{deltaTime:i,audioBoard:s}=e;if(this.spawnTimeout>.5&&this.shouldDropBomb){if(t.vel.x>2500)return void this.cancelBombDrop();for(let e=0;e<3;++e){const i=this.entityFactory.bomb();i.pos.x=t.pos.x+50+20*e,i.pos.y=t.pos.y+30,i.vel.x=t.vel.x,this.level.entities.add(i)}this.spawnTimeout=0,this.shouldDropBomb=!1}this.spawnTimeout+=i}}class st{constructor(t){this.context=t,this.buffers=new Map}addAudio(t,e){this.buffers.set(t,e)}playAudio(t){const e=this.context.createGain();e.gain.value=.3,e.connect(this.context.destination);const i=this.context.createBufferSource();i.buffer=this.buffers.get(t),i.start(0),i.connect(e)}stopAudio(t){const e=this.context.createGain();e.gain.value=.3,e.connect(this.context.destination);const i=this.context.createBufferSource();i.buffer=this.buffers.get(t),i.stop(),i.connect(e)}}async function nt(t){const e=new Audio("../sounds/Uri BGM (Special Force).mp3");e.load(),e.volume=.24,e.loop=!0,e.play();const i=document.getElementById("speedometer"),s=document.getElementById("machmeter"),n=document.getElementById("GameOver");let a=0,c=0;const l=document.getElementById("aerialHitCounter"),d=document.getElementById("groundHitCounter"),h=document.getElementById("distance"),p=document.getElementById("timer");d.innerText=`Ground Hits: ${c}`,l.innerText=`Aerial Hits: ${a}`,h.innerText="Distance: 0 Km",p.innerText="Elapsed Time: 0s";const b=t.getContext("2d"),w=await async function(){const t={};function e(e){return i=>{t[e]=i}}return Promise.all([F().then(e("playerFighter")),D().then(e("aircraftExplosion")),R().then(e("missile")),H().then(e("enemyFighter")),N().then(e("bomb")),V().then(e("bombExplosion")),Q().then(e("tank"))]).then(()=>t)}(),v=new AudioContext,T=new st(v),E=function(t){return async function(e){return fetch(e).then(t=>t.arrayBuffer()).then(e=>t.decodeAudioData(e))}}(v);E("../sounds/missile.mp3").then(t=>{T.addAudio("missile",t)}),E("../sounds/aircraftExplosion2.mp3").then(t=>{T.addAudio("aircraftExplosion",t)}),E("../sounds/bomb2.mp3").then(t=>{T.addAudio("bombExplosion",t)});const M=function(t){return async function(e){return f(`../levels/${e}.json`).then(t=>{t.layers.forEach(t=>{t.tiles.forEach(t=>{if("cloud"===t.pattern){const e=[-1,0,1];for(let i=2;i<1650;i+=4){let s=Math.floor(Math.random()*e.length);t.ranges.push([i,e[s]])}}})});const e=[0,1,2];for(let i=40;i<1600;i+=40){let s=Math.floor(Math.random()*e.length);t.entities.push({name:"enemyFighter",pos:[128*i,100*e[s]+45]})}for(let e=80;e<150;e+=25)t.entities.push({name:"tank",pos:[128*e,450]});for(let e=250;e<300;e+=25)t.entities.push({name:"tank",pos:[128*e,450]});for(let e=600;e<700;e+=25)t.entities.push({name:"tank",pos:[128*e,450]});for(let e=1400;e<1600;e+=25)t.entities.push({name:"tank",pos:[128*e,450]});return Promise.all([t,m(t.spriteSheet)])}).then(([e,i])=>{const s=new u;return y(e,s),x(e,s,i),g(e,s,t),s})}}(w),B=await M("1-1"),k=new o;var S;B.comp.layers.push(function(t){return t.entities,function(t){const e=[],i=t.tiles,s=i.tileSize,n=i.getByIndex;i.getByIndex=function(t,s){return e.push({x:t,y:s}),n.call(i,t,s)}}(t.tileCollider),function(t,e){}}(B)),B.comp.layers.push((S=k,function(t,e){t.strokeStyle="purple",t.beginPath(),t.rect(S.pos.x-e.pos.x,S.pos.y-e.pos.y,S.size.x,S.size.y),t.stroke()}));const I=w.playerFighter();I.pos.set(40,256),I.addTrait(new et(B,w)),I.addTrait(new it(B,w)),B.entities.add(I),function(t){const e=new tt;return e.addMapping("KeyW",e=>{t.ascend.direction+=e?-1:1,e?t.ascend.start():t.ascend.cancel()}),e.addMapping("KeyS",e=>{t.ascend.direction+=e?1:-1,e?t.ascend.start():t.ascend.cancel()}),e.addMapping("KeyD",e=>{t.go.direction+=e?1:-1}),e.addMapping("KeyA",e=>{t.go.direction+=e?-1:1}),e.addMapping("Numpad1",e=>{e?t.fireMissile.fireMissile():t.fireMissile.cancelMissileFire()}),e.addMapping("Digit1",e=>{e?t.fireMissile.fireMissile():t.fireMissile.cancelMissileFire()}),e.addMapping("Numpad2",e=>{e?t.dropBomb.dropBomb():t.dropBomb.cancelBombDrop()}),e.addMapping("Digit2",e=>{e?t.dropBomb.dropBomb():t.dropBomb.cancelBombDrop()}),e}(I).listenTo(window);const A={audioBoard:T,deltaTime:null};function z(t){T.playAudio("aircraftExplosion");const e=w.aircraftExplosion();e.pos.set(t.pos.x+50,t.pos.y-60),B.entities.add(e),setTimeout(()=>{B.entities.delete(e)},400)}let C=0;const O=new r(1/60);O.update=function(t){if(A.deltaTime=t,B.update(A),C+=t,p.innerText=`Elapsed Time: ${Math.round(C)} s`,h.innerText=`Distance: ${((I.pos.x<204800?I.pos.x:204800)/128*.036).toFixed(2)} Km`,i.textContent=`${I.vel.x} Km/h`,s.textContent=` MACH: ${(I.vel.x/1235).toFixed(2)}`,I.pos.x>100&&(k.pos.x=I.pos.x-100),I.pos.x>204800){O.stop(),k.pos.x=204800,e.pause();const t=new Audio("../sounds/victory.mp3");return t.load(),t.volume=.2,t.play(),n.classList.remove("hide"),n.classList.add("show"),document.getElementById("resultTitle").innerText="Mission Complete!",document.getElementById("airScore").innerText=`${a}`,document.getElementById("groundScore").innerText=`${c}`,document.getElementById("superSonicScore").innerText=`${Math.floor(I.supercruise.maintainedFor())} sec`,void document.getElementById("restart-btn").addEventListener("click",()=>{window.location.reload()})}B.entities.forEach(t=>{if(t.go&&(t.go.isObstructed||t.killable.dead)){e.pause();const i=new Audio("../sounds/sad bgm.mp3");return i.load(),i.volume=.2,i.play(),t.vel.set(0,0),B.entities.delete(t),z(t),n.classList.remove("hide"),n.classList.add("show"),document.getElementById("airScore").innerText=`${a}`,document.getElementById("groundScore").innerText=`${c}`,document.getElementById("superSonicScore").innerText=`${Math.floor(I.supercruise.maintainedFor())} sec`,void document.getElementById("restart-btn").addEventListener("click",()=>{window.location.reload()})}t.groundVehicle&&t.killable.dead&&(B.entities.delete(t),++c,d.innerText=`Ground Hits: ${c}`),t.missileLaunch&&(t.missileLaunch.isObstructed||t.killable.dead)&&B.entities.delete(t),t.missileLaunch&&t.missileLaunch.passedMaxRange(t,I.pos.x)&&B.entities.delete(t),t.gravity&&t.gravity.isObstructed&&(B.entities.delete(t),function(t){T.playAudio("bombExplosion");const e=w.bombExplosion();e.pos.set(t.pos.x-90,t.pos.y-100),B.entities.add(e),setTimeout(()=>{B.entities.delete(e)},900)}(t)),t.enemyAircraft&&(t.killable.dead&&(B.entities.delete(t),z(t),++a,l.innerText=`Aerial Hits: ${a}`),t.pos.x-k.pos.x<-100&&B.entities.delete(t))}),B.comp.draw(b,k)},O.start()}const ot=document.getElementById("screen"),rt=document.getElementById("Dashboard");document.getElementById("StartGame").addEventListener("click",t=>{t.preventDefault(),rt.parentElement.removeChild(rt),nt(ot)})}]);
//# sourceMappingURL=main.js.map